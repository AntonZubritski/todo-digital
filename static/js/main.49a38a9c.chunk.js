(this["webpackJsonptodo-digital"]=this["webpackJsonptodo-digital"]||[]).push([[0],{184:function(t,e,n){t.exports=n(326)},190:function(t,e,n){},299:function(t,e,n){},300:function(t,e,n){},326:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(81),c=n(72),i=n(174),u=n(31),s=+new Date,l=function(){for(var t,e,n=s.toString().split("").reverse(),a="",r=0;r<5;++r){a+=n[(t=0,e=n.length-1,Math.floor(Math.random()*(e-t+1))+t)]}return a},d={posts:!1,visible:!1,jsonAmount:null},f={addform:{title:null,body:null},edit:!1},p=n(145),m=Object(o.c)({todo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_INFO":return Object(u.a)(Object(u.a)({},t),{},{posts:e.payload,jsonAmount:e.amount});case"SWITCH_VISIBLE":return Object(u.a)(Object(u.a)({},t),{},{visible:e.payload});case"UPDATE_POSTS":return Object(u.a)(Object(u.a)({},t),{},{posts:[].concat(Object(i.a)(t.posts),[e.payload])});case"DELETE_POST":return Object(u.a)(Object(u.a)({},t),{},{posts:t.posts.filter((function(t){return t.id!==e.id}))});case"PUT_POST":return Object(u.a)(Object(u.a)({},t),{},{posts:t.posts.map((function(t){return t.id===e.body.id?e.body:t}))});default:return t}},change:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"CHANGE_ADD_FORM":return Object(u.a)(Object(u.a)({},e),{},{addform:Object(u.a)(Object(u.a)({},e.addform),{},(t={},Object(c.a)(t,n.name,n.payload),Object(c.a)(t,"id",l()),Object(c.a)(t,"key","".concat(l(),"-").concat(n.payload)),t))});case"CHANGE_EDIT_FORM":return Object(u.a)(Object(u.a)({},e),{},{addform:Object(u.a)(Object(u.a)({},e.addform),{},Object(c.a)({},n.name,n.payload))});case"EDIT_MODE":return Object(u.a)(Object(u.a)({},e),{},{edit:!0});case"EDIT_ADD_FORM":return Object(u.a)(Object(u.a)({},e),{},{addform:n.post});case"DELETE_ADD_FORM":return Object(u.a)({},f);default:return e}}}),b=Object(o.d)(m,Object(o.a)(p.a)),h=n(16),E=n.n(h),O=n(98),y=n(147),j=n(180),D=n(173),v=(n(190),n(110),n(51)),A=n(175),T=n(332),_=n(333),P=n(327),g=n(334),F=n(328),S=n(40),C=n(90),I=n.n(C),k=n(119),w=new function t(){var e=this;Object(O.a)(this,t),this._urlBase="https://my-json-server.typicode.com/antonzubritski/digitaldb",this.templateFetch=function(){var t=Object(k.a)(I.a.mark((function t(e,n,a){var r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{method:n,body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 2:if((r=t.sent).ok){t.next=5;break}throw new Error("Could not fetch, received ".concat(r.status));case 5:return t.abrupt("return",r.json());case 6:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),this.templatePostsFetch=function(){var t=Object(k.a)(I.a.mark((function t(n,a,r){var o;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.templateFetch(n,a,r);case 2:return o=t.sent,t.abrupt("return",o.map(e._transformPosts));case 4:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),this.fetchApi={getPosts:function(){return e.templatePostsFetch("".concat(e._urlBase,"/posts"),"GET")},setPost:function(t){return e.templateFetch("".concat(e._urlBase,"/posts"),"POST",t)},deletePost:function(t){return e.templateFetch("".concat(e._urlBase,"/posts/").concat(t),"DELETE")},putPost:function(t){return e.templateFetch("".concat(e._urlBase,"/posts/").concat(t.id),"PUT",t)}},this._transformPosts=function(t){return{id:t.id,key:"".concat(t.id,"-").concat(Math.floor(Math.random()*Math.floor(100))),title:t.title,body:t.body}}},x=function(t){return{type:"PUT_POST",body:t}},M=function(t){return{type:"DELETE_POST",id:t}},R=function(t){return{type:"UPDATE_POSTS",payload:t}},B=function(t,e){return{type:"UPDATE_INFO",payload:t,amount:e}},L=function(t){return{type:"ADD_ARTICLES_ERROR",payload:t}},N=function(){return{type:"DELETE_ADD_FORM"}},U=function(t){return{type:"SWITCH_VISIBLE",payload:t}},H=Object(v.b)((function(t){return{posts:t.todo.posts,visible:t.todo.visible,addform:t.change.addform,edit:t.change.edit,jsonAmount:t.todo.jsonAmount}}),(function(t){return{SwitchVisible:function(e){return t(U(e))},ChangeAddForm:function(e,n,a){return t(function(t,e,n){return{type:"CHANGE_ADD_FORM",name:t,length:n,payload:e}}(e,n,a))},ChangeEditForm:function(e,n){return t(function(t,e){return{type:"CHANGE_EDIT_FORM",name:t,payload:e}}(e,n))},SetPost:function(e,n){return t(function(t){return function(e){w.fetchApi.setPost(t).then((function(t){e(R(t)),e(N()),e(U())})).catch((function(t){e(L(t.message))}))}}(e))},PutPost:function(e,n){return t(function(t,e){return-1!==e.indexOf(t.id)?function(e){w.fetchApi.putPost(t).then((function(t){e(x(t)),e(N())})).catch((function(t){e(L(t.message))}))}:function(e){e(x(t)),e(N())}}(e,n))},DeleteAddForm:function(){return t(N())}}}))((function(t){var e=T.a.useForm(),n=Object(A.a)(e,1)[0];Object(a.useEffect)((function(){return n.setFieldsValue(l)}),[t.addform]);var o=t.ChangeAddForm,c=t.ChangeEditForm,i=t.posts,u=t.SwitchVisible,s=t.visible,l=t.addform,d=t.SetPost,f=t.PutPost,p=t.DeleteAddForm,m=t.edit,b=t.jsonAmount,h=function(t){var e=t.target,n=e.id,a=e.value;return m?c(n,a):o(n,a,i.length)},E=function(t){var e=_.a.success({title:"SUCCES",content:r.a.createElement("div",null,t)});setTimeout((function(){e.destroy()}),1e3)};return r.a.createElement(_.a,{title:"ADD POST",visible:s,onCancel:function(){u(!1),n.resetFields(),p()},footer:null,forceRender:!0},r.a.createElement(T.a,{form:n,onFinish:function(t){return u(!1),E("Added post!"),m?f(l,b):d(l)}},r.a.createElement(P.a,{span:24},r.a.createElement(T.a.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Please enter title post"}],onChange:h,preserve:!1},r.a.createElement(g.a,{placeholder:"Please enter title post",allowClear:!0}))),r.a.createElement(P.a,{span:24},r.a.createElement(T.a.Item,{name:"body",label:"Body",rules:[{required:!0,message:"please enter body post"}],onChange:h},r.a.createElement(g.a.TextArea,{rows:4,placeholder:"please enter body post",allowClear:!0}))),r.a.createElement(F.a,{justify:"space-around"},r.a.createElement(T.a.Item,null,r.a.createElement(S.a,{type:"primary",htmlType:"submit",key:"submit"},"Submit")))))})),G=n(335),V=n(329),J=(n(299),function(){var t=Object(v.c)();return r.a.createElement(F.a,{justify:"center"},r.a.createElement(V.a,{orientation:"left"},"AntonZubritski"),r.a.createElement(P.a,{style:{padding:"8px 0"}},r.a.createElement(S.a,{type:"primary",onClick:function(){return t(U(!0))}},r.a.createElement(G.a,null)," ADD POST")),r.a.createElement(H,null))}),q=n(330),z=n(331),W=n(169),Z=n(336),K=n(337),Q=(n(300),function(){var t=Object(v.c)(),e=Object(v.d)((function(t){return t.todo})).posts,n=Object(v.d)((function(t){return t.todo})).jsonAmount;Object(a.useEffect)((function(){t((function(t){w.fetchApi.getPosts().then((function(e){t(B(e,e.map((function(t){return t.id}))))})).catch((function(e){t(L(e.message))}))}))}),[]);var o=function(e){t(function(t,e){return-1!==e.indexOf(t)?function(e){w.fetchApi.deletePost(t).then((function(){e(M(t))})).catch((function(t){e(L(t.message))}))}:function(e){e(M(t))}}(e.id,n))},c=[{title:"Id",dataIndex:"id",key:"id"},{title:"Title",dataIndex:"title",key:"title"},{title:"Body",dataIndex:"body",key:"body"},{title:"Action",dataIndex:"",key:"x",render:function(e){return r.a.createElement(q.a,{size:"middle"},r.a.createElement(Z.a,{onClick:function(){return function(e){t(function(t){return{type:"EDIT_MODE",post:t}}()),t(function(t){return{type:"EDIT_ADD_FORM",post:t}}(e)),t(U(!0))}(e)}}),r.a.createElement(K.a,{onClick:function(){return o(e)}}))}}],i=e?r.a.createElement(z.a,{style:{padding:"50px 0",width:"80%"},columns:c,pagination:!0,dataSource:e}):r.a.createElement(W.a,{style:{padding:"100px 0"}});return r.a.createElement(F.a,{justify:"center"},i)}),X=function(t){Object(j.a)(n,t);var e=Object(D.a)(n);function n(){return Object(O.a)(this,n),e.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(J,null),r.a.createElement(Q,null))}}]),n}(a.Component);E.a.render(r.a.createElement(v.a,{store:b},r.a.createElement(X,{store:b,dispatch:b.dispatch.bind(b)})),document.getElementById("root"))}},[[184,1,2]]]);
//# sourceMappingURL=main.49a38a9c.chunk.js.map